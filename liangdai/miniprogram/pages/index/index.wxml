<!--index.wxml-->
<view class="container">

    <!-- 授权登录 -->
    <i-button wx:if="{{canIUse}}" type="success" shape="circle" size="large" open-type="getUserInfo"
              bindgetuserinfo="bindGetUserInfo">授权登录
    </i-button>
    <!--<view wx:else>请升级微信版本</view>-->

    <view wx:if="{{!canIUse}}">
        <i-tab-bar current="{{ current }}" bindchange="toggleLeft">
            <i-tab-bar-item key="homepage" icon="homepage" current-icon="homepage_fill" bind:change="toggleLeft"
                            title="Home"></i-tab-bar-item>
            <i-tab-bar-item key="remind" icon="remind" current-icon="remind_fill" count="{{cartCount}}"
                            title="Notice"></i-tab-bar-item>
        </i-tab-bar>

        <!--<i-button bind:click="toggleLeft1" type="ghost">左边弹出1</i-button>-->
        <i-drawer mode="left" visible="{{showLeft}}" bind:close="toggleLeft">
            <view class="demo-container">
                <i-panel class="cell-panel-demo" title="">
                    <i-cell title="管理页面" data-url="../manager/manager" bindtap="goPage" value="">
                        <i-icon type="like_fill" slot="icon"/>
                    </i-cell>
                </i-panel>
                <i-panel class="cell-panel-demo" title="">
                    <i-cell title="订单管理" value="">
                        <i-icon type="like_fill" slot="icon"/>
                    </i-cell>
                </i-panel>
                <i-panel class="cell-panel-demo" title="">
                    <i-cell title="我的订单" value="">
                        <i-icon type="like_fill" slot="icon"/>
                    </i-cell>
                </i-panel>
                <i-panel class="cell-panel-demo" title="">
                    <i-cell title="购物车" data-url="../cart/cart" bindtap="goPage" value="">
                        <i-icon type="like_fill" slot="icon"/>
                    </i-cell>
                </i-panel>
            </view>
        </i-drawer>
        <!-- 通知栏 -->
        <view wx:if="{{checked}}">
            <import src="../template/template.wxml"/>
            <template is="notice" data="{{noticeMsg:notice}}"/>
        </view>

        <!-- 用户 openid -->
        <view wx:if="{{canIUse}}" class="userinfo">
            <button open-type="getUserInfo" bindgetuserinfo="onGetUserInfo" class="userinfo-avatar"
                    style="background-image: url({{avatarUrl}})"></button>
            <view>
                <button class="userinfo-nickname" bindtap="onGetOpenid">点击获取 openid</button>
            </view>
        </view>


        <i-card full wx:for="{{productList}}" title="{{item.name}}" extra="{{item.price}}"
                thumb="{{item.image}}">
            <view slot="footer">{{item.type}}
                <view style="float:right">
                    <i-icon type="add" size="28" id="{{ index }}" bindtap="addCart" color="#80848f"></i-icon>
                </view>
            </view>
        </i-card>
    </view>


    <!-- 上传图片
      <view class="uploader">
        <view class="uploader-text" bindtap="doUpload">
          <text>上传图片</text>
        </view>
        <view class="uploader-container" wx:if="{{imgUrl}}">
          <image class="uploader-image" src="{{imgUrl}}" mode="aspectFit" bindtap="previewImg"></image>
        </view>
      </view>
  -->

    <!-- 操作数据库
      <view class="uploader">
        <navigator url="../databaseGuide/databaseGuide" open-type="navigate" class="uploader-text">
          <text>前端操作数据库</text>
        </navigator>
      </view>
      -->

    <!-- 新建云函数
      <view class="uploader">
        <navigator url="../addFunction/addFunction" open-type="navigate" class="uploader-text">
          <text>快速新建云函数</text>
        </navigator>
      </view>
    -->
</view>